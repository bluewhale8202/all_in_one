{% extends "info/info_base.html" %}

{% block title %} 반품요청 조회 {% endblock %}

{% block script %}
<script>
    $(function() {
        // Currently, ESM allows only one row to be sellected
        // so we apply the same restriction to the checkboxes
        $('input:checkbox').on('click', function() {
            $('input:checkbox').not(this).prop('checked', false);
        });

        $('#return').click(function(e){
            e.preventDefault();

            var oinfs = $("input:checked").parents("tr").find("input").serialize();
            var csrf = $("#confirm input[name='csrfmiddlewaretoken']").serialize();

            $.post({
                    url: "{% url 'info:toreturn_confirm' %}",
                    data: oinfs + "&" + csrf,
                    success: function(result,status,xhr) {
                        if (result['status'] === "ok"){
                            alert("반품등록 성공\n" + result['msg']); location.reload(); }
                        else { alert(result['msg']); location.reload(); }
                    },
            });
        });
    });
</script>
{% endblock %}

{% block buttons %}
<input type="submit" id="return" style="cursor:pointer" value="반품처리"></input>
{% endblock %}

{% block custom_fields_label %}
<th style="color:blue">주문번호</th>
<th style="color:blue">반품상태</th>
<th style="color:blue">반품신청일</th>
{% endblock %}

{% block custom_fields_esm %}
<td>{{ entry.OrderNo }}</td>
<td>{{ entry.StatusName }}</td>
<td>{{ entry.ClaimRegDate }}</td>


{% endblock %}

{% block custom_fields_storefarm %}
<td>{{ entry.PRODUCT_ORDER_ID }}</td>    {# different from OrderNo #}
<td>{{ entry.CLAIM_STATUS }}</td>
<td>{{ entry.CLAIM_REQUEST_OPERATION_YMDT_RETURN }}</td>
{% endblock %}
